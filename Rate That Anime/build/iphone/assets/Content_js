login=require("login");var getData=function(){console.log(username.value);var e="https://hbrd-v1.p.mashape.com/users/di3twater/library";if(Ti.Network.online){var t=Ti.Network.createHTTPClient();t.open("GET",e),t.setRequestHeader("X-Mashape-Authorization","aAlcvjLDMSmshMRRPNyBJlkHR8wYp1s9KkfjsnXOf5ppTcZ4yO"),t.send(),t.onerror=function(){Ti.UI.createAlertDialog({title:"Network Error",message:"unable to retrieve data"}).show()},t.onload=function(){alert("api loaded");for(var e=JSON.parse(this.responseText),t=0;t<e.length;t++){var i=Ti.UI.createImageView({image:e[t].anime.cover_image,title:e[t].anime.slug,timeStart:e[t].anime.started_airing,timeEnd:e[t].anime.finished_airing,desc:e[t].anime.synopsis,score:e[t].anime.community_rating,height:150,top:170*t});i.addEventListener("touchstart",function(e){mainImage.image=e.source.image,title.title=e.source.title,year.text=e.source.timeStart,label.text=e.source.desc,rating.text=Math.round(100*e.source.score)/100}),scroll.add(i)}}}},win=Ti.UI.createWindow({backgroundColor:"#e2e1df"});win.addSubview;var content=Ti.UI.createWindow({backgroundColor:"#efeeea"}),splitWin=Ti.UI.iPad.createSplitWindow({masterView:content,detailView:win,showMasterInPortrait:!0}),mainImage=Ti.UI.createImageView({width:280,height:710/1.75,top:60,right:20});mainImage.addEventListener("touchstart",function(){popover.show({view:mainImage})});var scroll=Ti.UI.createScrollView({contentHeight:"auto",showVerticalScrollIndicator:!0}),popover=Ti.UI.iPad.createPopover({width:250,height:110,arrowDirection:Ti.UI.iPad.POPOVER_ARROW_DIRECTION_RIGHT}),label=Ti.UI.createLabel({color:"#888",font:{fontSize:20,fontWeight:"bold"},textAlign:"left",top:60,left:45,width:300}),rating=Ti.UI.createLabel({bottom:20,font:{fontSize:160,fontWeight:"bold",fontFamily:"Chunkfive"},right:20}),title=Ti.UI.createLabel({width:140,left:120,color:"#ffffff",font:{fontSize:16},top:30,height:30}),year=Ti.UI.createLabel({color:"#ffffff",font:{fontSize:16},left:120,width:140,top:60,height:30});getData(),popover.add(title),popover.add(year),content.add(scroll),win.add(mainImage),win.add(label),win.add(rating),splitWin.open();